name: CI Pipeline

on:
  push:
    branches: [ main, master ]
  pull_request:
    branches: [ main, master ]

jobs:
  hello-world:
    name: Hello World
    runs-on: ubuntu-latest
    
    steps:
      - name: Checkout code
        uses: actions/checkout@v4
        
      - name: Print OK message
        run: echo "‚úÖ OK - Everything is working!"
        
      - name: Show environment info
        run: |
          echo "Repository: ${{ github.repository }}"
          echo "Branch: ${{ github.ref }}"
          echo "Commit: ${{ github.sha }}"


  shellcheck:
    name: Shell Script Check
    runs-on: ubuntu-latest
    
    steps:
      - name: Checkout code
        uses: actions/checkout@v4
        
      - name: Install shellcheck
        run: sudo apt-get update && sudo apt-get install -y shellcheck
        
      - name: Find and check shell scripts
        run: |
          echo "üîç Looking for shell scripts..."
          find . -name "*.sh" -type f | while read file; do
            if [ -f "$file" ]; then
              echo "üìù Checking: $file"
              shellcheck "$file" || echo "‚ùå Issues found in $file"
            fi
          done
          
      - name: Check specific script (–ø—Ä–∏–º–µ—Ä)
        run: |
          # –ï—Å–ª–∏ —É –≤–∞—Å –µ—Å—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π —Å–∫—Ä–∏–ø—Ç –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏
          if [ -f "./scripts/my-script.sh" ]; then
            echo "üîç Checking my-script.sh"
            shellcheck "./scripts/my-script.sh"
          else
            echo "‚ÑπÔ∏è  No specific script found, skipping"
          fi

  test:
    name: Test
    runs-on: ubuntu-latest
    
    steps:
      - name: Checkout code
        uses: actions/checkout@v4
        
      - name: Install poppler
        run: sudo apt -qqq update && sudo apt -qqq install -y make poppler-utils
        
      - name: Test
        run: |
          make test
